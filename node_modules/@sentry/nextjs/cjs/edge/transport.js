Object.defineProperty(exports, '__esModule', { value: true });

const core = require('@sentry/core');

/**
 * Creates a Transport that uses the Edge Runtimes native fetch API to send events to Sentry.
 */
function makeEdgeTransport(options) {
  function makeRequest(request) {
    const requestOptions = {
      body: request.body,
      method: 'POST',
      referrerPolicy: 'origin',
      headers: options.headers,
      ...options.fetchOptions,
    };

    try {
      return fetch(options.url, requestOptions).then(response => ({
        statusCode: response.status,
        headers: {
          'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),
          'retry-after': response.headers.get('Retry-After'),
        },
      }));
    } catch (e) {
      return Promise.reject(e);
    }
  }

  return core.createTransport(options, makeRequest);
}

exports.makeEdgeTransport = makeEdgeTransport;
//# sourceMappingURL=transport.js.map
